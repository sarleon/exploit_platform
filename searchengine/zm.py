import requests
import zoomeye

ZOOMEYE_PASSWORD="Admin@#45"
ZOOMEYE_USERNAME="centurior@protonmail.com"


HOST = "api.zoomeye.org"
SCHEMA = "https"


#
# def login(username,password):
#     login_url = SCHEMA + "://" + HOST + "/user/login"
#     data = {
#         "username":username,
#         "password":password
#     }
#
#     response = requests.post(login_url,json=data)
#     response_json_data = response.json()
#     access_token = response_json_data.get('access_token')
#     return access_token
#
#
# def search_page(access_token,query,page=1,facets=""):
#     search_url = SCHEMA + "://" + HOST +  "/host/search"
#     headers = {
#         "Authorization":"JWT "+access_token
#     }
#     data = {
#         "query":query,
#         "page":page,
#         "facets":facets
#     }
#
#     response = requests.post(search_url,headers=headers,json=data)
#     print(response.text)
# def search(query):
#     access_token = login(ZOOMEYE_USERNAME, ZOOMEYE_PASSWORD)
#     search_page(access_token,query)



def search(query):

    zm = zoomeye.ZoomEye()
    zm.username=ZOOMEYE_USERNAME
    zm.password=ZOOMEYE_PASSWORD
    zm.login()
    zm.dork_search()

if __name__ == '__main__':
    search("phpstudy")